<!DOCTYPE html>
<html>
<head>
	<title>CV - Mikašinović</title>
	<link rel="icon" type="image/x-icon" href="/photos/favicon.png">
	<base href="https://mikas-m.github.io" target="_blank">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
div {
  text-align: justify;
  text-justify: inter-word;
}
img {
	width: 30%;
	height: auto;
}
</style>
</head>
<body>
<code>
SELECT
    CASE
        WHEN z.sif_adrese IS NOT NULL THEN TO_CHAR(z.sif_adrese)
        WHEN b.sifra_adrese IS NOT NULL THEN TO_CHAR(b.sifra_adrese)
        ELSE 
            CASE
                WHEN p.adresa LIKE 'Darka Medanića%' THEN '1-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Doričići%' THEN '2-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Dujmići%' THEN '3-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Elvira Vrha%' THEN '4-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Glavani%' THEN '5-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Ive Šodića%' THEN '6-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Josipa Šarinića%' THEN '7-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Kostrenskih boraca%' THEN '8-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Maračići%' THEN '9-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Martinšćica%' THEN '10-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Mažeri%' THEN '11-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Paveki%' THEN '12-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Perovići%' THEN '13-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Plešići%' THEN '14-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Randići%' THEN '16-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Raspelje%' THEN '17-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Rožići%' THEN '18-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Rožmanići%' THEN '19-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Stara voda%' THEN '20-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Suzanićev put%' THEN '21-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Sveta Lucija%' THEN '22-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Šetalište Kostrenskih Pomoraca%' THEN '23-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Šodići%' THEN '24-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Šoići%' THEN '25-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Šojska%' THEN '26-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Šubati%' THEN '27-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Trg Svete Barbare%' THEN '28-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Urinj%' THEN '29-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Vrh Martinšćice%' THEN '30-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Žarka Pezelja%' THEN '31-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Željka Čepulića%' THEN '32-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Žuknica%' THEN '33-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Žurkovo%' THEN '34-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
                WHEN p.adresa LIKE 'Ulica hrvatskih branitelja%' THEN '35-' || LTRIM(REGEXP_SUBSTR(p.adresa, '[0-9].*'),'0')
            ELSE ''
            END
    END AS address,
    CASE
        WHEN z.sif_adrese IS NOT NULL AND z.sif_adrese LIKE '%'||'/'||'%' THEN TO_CHAR(REGEXP_SUBSTR(z.sif_adrese,'[^-]+',1,1))
        WHEN z.sif_adrese IS NOT NULL THEN TO_CHAR(REGEXP_SUBSTR(z.sif_adrese,'[^-]+',1,1))
        WHEN b.sifra_adrese IS NOT NULL AND b.sifra_adrese LIKE '%'||'/'||'%' THEN TO_CHAR(REGEXP_SUBSTR(b.sifra_adrese,'[^-]+',1,1))
        WHEN b.sifra_adrese IS NOT NULL THEN TO_CHAR(REGEXP_SUBSTR(b.sifra_adrese,'[^-]+',1,1))
        ELSE ''
    END AS code_address,
    CASE
        WHEN z.sif_adrese IS NOT NULL AND z.sif_adrese LIKE '%'||'/'||'%' THEN TO_CHAR(REGEXP_SUBSTR(z.sif_adrese, '[^-]+', 1, 2))
        WHEN z.sif_adrese IS NOT NULL THEN TO_CHAR(REGEXP_SUBSTR(z.sif_adrese, '[^-]+', 1, 2))
        WHEN b.sifra_adrese IS NOT NULL AND b.sifra_adrese LIKE '%'||'/'||'%' THEN TO_CHAR(REGEXP_SUBSTR(z.sif_adrese, '[^-]+', 1, 2))
        WHEN b.sifra_adrese IS NOT NULL THEN TO_CHAR(REGEXP_SUBSTR(z.sif_adrese, '[^-]+', 1, 2))
        ELSE         
            CASE
                WHEN p.adresa LIKE 'Darka Medanića%' THEN '1'
                WHEN p.adresa LIKE 'Doričići%' THEN '2'
                WHEN p.adresa LIKE 'Dujmići%' THEN '3'
                WHEN p.adresa LIKE 'Elvira Vrha%' THEN '4'
                WHEN p.adresa LIKE 'Glavani%' THEN '5'
                WHEN p.adresa LIKE 'Ive Šodića%' THEN '6'
                WHEN p.adresa LIKE 'Josipa Šarinića%' THEN '7'
                WHEN p.adresa LIKE 'Kostrenskih boraca%' THEN '8'
                WHEN p.adresa LIKE 'Maračići%' THEN '9'
                WHEN p.adresa LIKE 'Martinšćica%' THEN '10'
                WHEN p.adresa LIKE 'Mažeri%' THEN '11'
                WHEN p.adresa LIKE 'Paveki%' THEN '12'
                WHEN p.adresa LIKE 'Perovići%' THEN '13'
                WHEN p.adresa LIKE 'Plešići%' THEN '14'
                WHEN p.adresa LIKE 'Randići%' THEN '16'
                WHEN p.adresa LIKE 'Raspelje%' THEN '17'
                WHEN p.adresa LIKE 'Rožići%' THEN '18'
                WHEN p.adresa LIKE 'Rožmanići%' THEN '19'
                WHEN p.adresa LIKE 'Stara voda%' THEN '20'
                WHEN p.adresa LIKE 'Suzanićev put%' THEN '21'
                WHEN p.adresa LIKE 'Sveta Lucija%' THEN '22'
                WHEN p.adresa LIKE 'Šetalište kostrenskih pomoraca%' THEN '23'
                WHEN p.adresa LIKE 'Šodići%' THEN '24'
                WHEN p.adresa LIKE 'Šoići%' THEN '25'
                WHEN p.adresa LIKE 'Šojska%' THEN '26'
                WHEN p.adresa LIKE 'Šubati%' THEN '27'
                WHEN p.adresa LIKE 'Trg Svete Barbare%' THEN '28'
                WHEN p.adresa LIKE 'Urinj%' THEN '29'
                WHEN p.adresa LIKE 'Vrh Martinšćice%' THEN '30'
                WHEN p.adresa LIKE 'Žarka Pezelja%' THEN '31'
                WHEN p.adresa LIKE 'Željka Čepulića%' THEN '32'
                WHEN p.adresa LIKE 'Žuknica%' THEN '33'
                WHEN p.adresa LIKE 'Žurkovo%' THEN '34'
                WHEN p.adresa LIKE 'Ulica hrvatskih branitelja%' THEN '35'
                ELSE ''
            END
    END AS home_number,
    CASE
        WHEN z.adresa IS NOT NULL THEN TO_CHAR(INITCAP(z.adresa))
        WHEN z.adresa IS NULL AND b.adresa_objekta IS NOT NULL THEN TO_CHAR(INITCAP(b.adresa_objekta))
        ELSE INITCAP(p.adresa)
    END AS address,
SUM(z.NKP_UKUPNO) AS nkp_sum,
SUM(z.PP_UKUPNO) AS pp_sum,
SUM(z.PP_ZEMLJISTE_UKUPNO) AS pp_zemljiste_sum,
SUM(b.povrsina) AS aresa_sum,
    CASE
        WHEN p.adresa IS NOT NULL THEN 'višestambeno'
        WHEN b.adresa_objekta IS NULL AND z.adresa IS NOT NULL THEN 'izmjereno, ali nije u bazi komunalne naknade'
        WHEN b.adresa_objekta IS NOT NULL AND z.adresa IS NULL THEN 'nije izmjereno, ali je u bazi komunalne naknade'
        WHEN b.adresa_objekta IS NOT NULL AND z.adresa IS NOT NULL THEN ''
        ELSE 'treba provjeriti'
    END AS note
FROM baza_kom_naknade b
FULL JOIN zgrada_ukupno z
ON z.sif_adrese = b.sifra_adrese
FULL JOIN povrsine_vs_view p
ON b.adresa_objekta = z.adresa
GROUP BY b.sifra_adrese, b.adresa_objekta, z.adresa, z.sif_adrese, p.adresa
ORDER BY 
CASE WHEN REPLACE(TRANSLATE(TRIM(code_address),'0123456789','0'),'0','') IS NULL THEN TO_NUMBER(code_address) end, 
CASE WHEN REPLACE(TRANSLATE(TRIM(home_number),'0123456789','0'),'0','') IS NULL THEN TO_NUMBER(home_number) end;
</code>
